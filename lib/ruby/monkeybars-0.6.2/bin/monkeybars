#! /usr/bin/env ruby

require 'fileutils'
require 'rubygems'
require 'monkeybars_version'

def help(message = nil)
  $stdout << message + "\n-----------------------------------\n" unless message.nil?
  $stdout << <<-ENDL
  Usage:
      monkeybars -h/--help
      monkeybars -v/--version
      
      monkeybars project_name
        Creates a new directory (project_name) containing a project skeleton with all files needed to run a monkeybars application.
  ENDL
end

if ARGV.empty?
  help
else
  case ARGV[0]
  when "-h" || "--help" || nil
    help
  when "-v" || "--version"
    $stdout << "Monkeybars version #{Monkeybars::VERSION}\n"
  else
    # create new directory and copy app skeleton over
    project_name = ARGV[0]
    
    unless File.directory? project_name
      $stdout << "Creating directory #{project_name}\n"
      FileUtils.mkdir_p(project_name)
      FileUtils.cd(project_name)
      $stdout << "Copying monkeybars project structure\n"
      FileUtils.cp_r(File.dirname(__FILE__) + "/../skeleton/.", "./")
    else
      $stdout << "Directory already exists, aborting\n"
    end
  end
end